1.程序中的中断函数地址不固定(通常由编译器分配)，触发中断时，由硬件跳转到一个固定的地址，然后在这个固定地址加一条跳转到中断函数的代码触发中断，所有中断跳转到固定地址的集合叫做中断向量表。

2.NVIC全称嵌套中断向量控制器，用来分配中断优先级和管理中断，多个中断通过NVIC，由NVIV经过裁决选出最紧急的中断交由CPU执行。

3.相应优先级高的，执行顺序比较靠前(不能相互打断)，抢占优先级高的，可以进行中断嵌套(互相打断)。

3*.优先级相同时,谁自然优先级(中断向量表的优先级)高,谁先执行.

3*.数值越小,中断优先级越高.

3*.优先级考虑顺序:先抢占优先级,后响应优先级,后自然优先级.

4.NVIC是一个内核外设，但是各个芯片厂商在设计芯片的时候会对Cortex-M3内核里面的NVIC进行裁剪，把不需要的部分去掉，所以STM32的NVIC是Cortex-M3 NVIC的一个子集。不同型号的芯片会对Cortex-Mx的NVIC进行适量裁剪，中断数量会不一样。

5.EXTI就是对IO口进行电平监测，触发方式：上升沿，下降沿，双边沿，软件触发。支持所有GPIO口，相同IO口号不能同时触发中断，一个IO口号选择A，B，C，D，E其中一个触发EXTI中断

6.AFIO管理中断引脚选择，事件引脚选择，还有重映射。

7.f103系列中IO口5~9会共用一个中断函数，10到15也会共用一个中断函数，需要通过标志位区分是哪个IO口触发的。

8.NVIC_IPRx寄存器，(以Cotex-M3系列的stm32为例，以下寄存器都是)，(全称nterrupt priodity registers中断优先级寄存器)，x代表它有多个，x取值0~20，最多21个.

8*.是32位寄存器，这32位可以配置四个中断的优先级，可以配置21 * 4 = 84个中断，一个中断占8位，可以表示0~255. f103系列是一个中断的低四位不使用，只用高四位，表示范围0~15.

8*.冷知识  复位，NMI，硬件错误中断的优先级是负数，NVIC_IPR寄存器8位256或者4位16种优先级为无符号数

9.SCB_AIRCR寄存器，全称System Control Block Application interrupt and reset control register,系统控制区的应用中断和控制寄存器，其中三位用来NVIC优先级分组(PRIGROUP),可以表示范围0~7，但是该系列只使用3~7这5个数，每个数对应一种分组，它把NVIC_IPRx32位寄存器中一个中断的4位(由ST公司裁剪后从8位成了4位)进行分组。比如给3代表 4位全作为抢占优先级分组，给7代表 4位全作为相应优先级分组  ，4~7中间的数，成比例均分4位中断优先级。


注:以下源自正点原子.

10.外部中断.信号通过GPIO来到AFIO(F1),或者SYSCFG(F4,F7,H7).共同完成一个内容,让GPIOx映射到EXTIx里.

10*.EXTI干了一件什么事:屏蔽源自IO的信号,或者捡出其中的上升沿/下降沿.

10*.从EXTI到了NVIC,NVIC他干了什么事: 使能中断,中断优先级控制.

10*.最后通向CPU处理中断.

10*.ST公司不同系列的外设寄存器,或者外设运行规则不一样!!!注意了解一番.

11.NVIC(Nested Vectored interrupt Controller),嵌套向量中断控制器.

12.NVIC支持256个中断(16内核+240外部),支持:256个优先级,允许裁剪.

13.什么是中断向量表?

定义一块固定的内存,以四字节对齐,存放各个中断服务函数程序的首地址.

中断向量表定义在启动文件,当发生中断时,CPU会自动执行对应的中断服务函数. 

14.寄存器介绍.

中断使能寄存器(ISER).位数:32位,寄存器个数:8,每个位控制一个中断,最多可以控制240个中断.16个保留.

中断除能寄存器(IXER).位数:32位,寄存器个数:8,每个位控制一个中断,最多可以控制240个中断.16个保留.

应用程序中断及复位控制寄存器(AIRCR):位数:32,寄存器个数:1,位[10:8]控制优先级分组.

中断优先级寄存器(IPR):位数8,个数240.8个位对应一个中断,而STM32只用高四位.

NVIC还有:中断挂起,解挂,激活标志等.

以下均为32位寄存器:

ISPR[8]:每一位直接按照优先级挂起(执行)中断.

ICPR[8]:每一位直接取消挂起(结束)中断.

IABR[8]:只读,哪一位被设置说明对应的中单在执行.

15.NVIC工作流程: 中断信号先由NVIC的ISER和ICER控制是否使能.由IPR寄存器仲裁优先级.然后通向CPU.

而内核中断则不同,直接通往SHPR寄存器控制,配置内核中断的优先级,和IPR里的一起比.

16.NVIC配置: 设置中断分组,设置中断优先级,使能中断.