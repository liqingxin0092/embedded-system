stm32内部集成了硬件SPI的收发电路，可以由硬件自动执行时钟生成，数据收发等功能，减轻了cpu的负担，节省软件资源。

可配置8位，或者16位数据帧，高位或者低位先行。

时钟频率：Fclk(外设时钟)/(2,4,8,16,32,64,128,256)

支持多主机模型，主或从操作。

可精简为半双工/单工操作，为了照顾特殊情况。半双工(针对硬件SPI):去掉一根数据线，只在一根线上分时进发送或接收

支持DMA。

兼容I2S协议(一种音频传输协议)

STM32f103c8t6有SPI1，SPI2。 外设时钟：APB2是72MHz(SPI1挂载),APB1是36MHz(SPI2挂载)

SPI全双工，发送和接收同步进行，数据寄存器，发送和接收是分离的，移位寄存器，发送和接收共用

而I2C是半双工，发送和接收都可以是共用的，串口是全双工异步通信，数据寄存器发送和接收是分离的，移位寄存器发送和接收也是分离的

寄存器：

LIB FIRST:决定高位先行还是低位先行。SPE(SPI Enable):SPI使能，是函数SPI-Cmd()配置的位。BR(Baud Rate):配置波特率,SCK时钟频率。MSTR(Master):配置主从模式。

CPOL,CPHA:选择SPI的四种模式。      状态寄存器:TXE,为1标志发送寄存器空,此时可以写入数据开始传输。RXNE:接收寄存器非空。

SSOE：为1时，NSS作为输出引脚，并在当前设备为主设备时，给NSS输出低电平，告诉其他设备我现在时主机。主机结束后，SSOE需要清0，NSS变为输入。

SSM决定输入的信号通向哪一路,有硬件NSS模式(这时如果输入了低电平，当前设备进入不了主模式了)，还有软件管理NSS输入(NSS是1还是0,由SSI位决定)

NSS引脚:配置为输出时，就告诉别的设备，我现在是主机，别的设备是从机；配置为输入模式时，可以接收别设备的信号，别设备拉低NSS后，stm32无论如何变不了主机。
